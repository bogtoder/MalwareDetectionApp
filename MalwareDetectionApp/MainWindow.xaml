<Window x:Class="MalwareDetectionApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:ValueConverters="clr-namespace:MalwareDetectionApp.ValueConverters"
        mc:Ignorable="d"
        Title="Malware Detector" Height="Auto" MinHeight="500" MaxHeight="750" Width="Auto" MinWidth="850" MaxWidth="1500" ResizeMode="CanResizeWithGrip"
        Closing="MainWindow_Closing" Foreground="#FFE0E0E0" Icon="/icons8-virus-free-96.png">

    <Window.Resources>
        <ValueConverters:ScanResultToStringConverter x:Key="ScanResultToStringConverter"/>
        <ValueConverters:HighMalwareProbabilityExistsConverter x:Key="HighMalwareProbabilityExistsConverter"/>
    </Window.Resources>

    <Window.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FF161616" Offset="0.726"/>
            <GradientStop Color="#FF222222" Offset="1"/>
        </LinearGradientBrush>
    </Window.Background>

    <Grid x:Name="Grid">
        <Grid.RowDefinitions>
            <RowDefinition Height="0"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="137*"/>
            <ColumnDefinition Width="288*"/>
            <ColumnDefinition Width="425*"/>
        </Grid.ColumnDefinitions>

        <GroupBox Header="Possible Infected Files" Grid.Row="1" Grid.Column="0" FontSize="20" Margin="10,10,10,10" 
                  VerticalContentAlignment="Stretch" BorderThickness="0.1,0.1,0.1,0.1" FontFamily="Yu Gothic UI Semilight" Grid.ColumnSpan="2">
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" CanContentScroll="True">
                <ListBox x:Name="PossibleInfectedFiles" IsSynchronizedWithCurrentItem="True" 
                         MouseDoubleClick="FilesList_MouseDoubleClick_GotoFile" 
                         FontSize="16" HorizontalAlignment="Stretch" Background="#FF2B2B2B" BorderBrush="Black" Foreground="#FFD9D9D9" FontFamily="Nirmala UI">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Name="ItemPanel">
                                <TextBlock Text="{Binding FilePath}" FontWeight="Normal" FontSize="12" Margin="5"/>
                                <TextBlock FontSize="10" Margin="5" FontWeight="Light" VerticalAlignment="Bottom">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}{0}">
                                            <Binding Path="ScanResult" Converter="{StaticResource ScanResultToStringConverter}" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                                <Button Content="Rescan" Click="Button_Click_RescanFile" Margin="5" FontSize="10"/>
                                <Button Content="Delete" Click="Button_Click_DeleteFile" Margin="5" FontSize="10"/>
                                <Button Content="Exclude" Click="Button_Click_ExcludeFile" Margin="5" FontSize="10"/>
                            </StackPanel>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding ScanResult, Converter={StaticResource HighMalwareProbabilityExistsConverter}}" Value="True">
                                    <Setter TargetName="ItemPanel" Property="Background" Value="#7FD20000"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </ScrollViewer>
        </GroupBox>
        <GroupBox Header="Uninfected Files" Grid.Row="1" Grid.Column="2" 
                  FontWeight="Bold" FontSize="20" Margin="10,10,10,10" 
                  VerticalContentAlignment="Stretch" BorderThickness="0.1,0.1,0.1,0.1" FontFamily="Yu Gothic UI Semilight">
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" CanContentScroll="True">
                <ListBox x:Name="UninfectedFiles" IsSynchronizedWithCurrentItem="True" 
                         MouseDoubleClick="FilesList_MouseDoubleClick_GotoFile" 
                         FontSize="16" HorizontalAlignment="Stretch" Background="#FF2B2B2B" BorderBrush="Black" Foreground="#FFD9D9D9" BorderThickness="0.1,0.1,0.1,0.1"
                         ScrollViewer.CanContentScroll="True" FontFamily="Nirmala UI">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding FilePath}" FontWeight="Normal" FontSize="12" Margin="5"/>
                                <Button Content="Rescan" Click="Button_Click_RescanFile" Margin="5" FontSize="10"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </ScrollViewer>
        </GroupBox>

        <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2">
            <GroupBox Header="Tracked Paths"  
                      FontWeight="DemiBold" FontSize="16" Margin="10" 
                      VerticalContentAlignment="Stretch" BorderThickness="0.1,0.1,0.1,0.1" FontFamily="Yu Gothic UI Semilight">
                <ListBox x:Name="TrackedDirectories" Background="#FF2B2B2B" BorderBrush="Black" Foreground="#FFD9D9D9"
                         FontFamily="Nirmala UI">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding}" FontWeight="Normal" FontSize="12" Margin="5"/>
                                <Button Content="Exclude path" Click="Button_Click_ExcludeDirectory" Margin="5" FontSize="10"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </GroupBox>
            <Button Content="Track new Directory" Click="StartTracking_Click" 
                    Margin="0,0,10,5" HorizontalAlignment="Right" FontFamily="Yu Gothic UI Semilight" Foreground="#FFF4F4F4">
                <Button.Background>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FF262626" Offset="0"/>
                        <GradientStop Color="#FF807878" Offset="1"/>
                        <GradientStop Color="#FF262626" Offset="0.736"/>
                    </LinearGradientBrush>
                </Button.Background>
            </Button>
        </StackPanel>

        <GroupBox Header="Excluded Paths" Grid.Row="2" Grid.Column="2" 
                  FontWeight="DemiBold" FontSize="16" Margin="10,10,10,10" 
                  VerticalContentAlignment="Stretch" BorderThickness="0.1,0.1,0.1,0.1" FontFamily="Yu Gothic UI Semilight">
            <ListBox x:Name="Exclusion" Background="#FF2B2B2B" BorderBrush="Black" Foreground="#FFD9D9D9"
                     FontFamily="Nirmala UI">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding}" FontWeight="Normal" FontSize="12" Margin="5"/>
                            <Button Content="Remove from excluded" Click="Button_Click_RemoveFromExcluded" Margin="5" FontSize="10"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </GroupBox>
    </Grid>

</Window>
